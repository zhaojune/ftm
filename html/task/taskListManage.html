<table id="taskList" cellspacing="0" toolbar="#taskListtb" cellpadding="0" border="false" style="height:70%;width: 100%;">
    <thead>
    <tr>
        <th field="tkNum" width="50" align="center">序号</th>
        <th field="tkName" width="100" align="center">任务名称</th>
        <th field="tkStartTime" width="100" align="center">任务开始时间</th>
        <th field="tkEndTime" width="100" align="center">任务结束时间</th>
        <th field="tkCreator" width="100" align="center">创建人</th>
        <th field="tkCreateTime" width="100" align="center">创建时间</th>
        <th field="tkSchedule" width="100" align="center">进度</th>
        <th field="tkOperation" width="160" align="center" data-options="formatter:cOperation">操作</th>

    </tr>
    </thead>

</table>

<div id="taskListtb" style="padding-left:70px;padding-top:20px;height: 20%;font-size: 15px;">
    <div style="height: 50%;">
        <label>
            <input id="taskListSearchName_input" class="easyui-textbox" data-options="prompt:'请输入任务名称'" style="border:1px solid #b7d2ff;color:gainsboro;width: 150px;height: 30px;"/>
        </label>

        <label style="padding-left: 70px;width: 20%;height: 100%;">
            <input id="taskListSearchStartTime_input" data-options="prompt:'任务开始时间'" editable="false" style="color:gainsboro;width:150px;height: 30px;" class="easyui-datetimebox"/>
        </label>
        <span style="padding-left: 20px;">&nbsp;至&nbsp;</span>
        <label style="padding-left: 20px;">
            <input id="taskListSearchEndTime_input" data-options="prompt:'任务结束时间'" editable="false" style="font-size: 15px;color:gainsboro;width:150px;height: 30px;" class="easyui-datetimebox"/>
        </label>

        <label style="padding-left:70px;width: 40%;">
            <input id="taskListSearchState_input"  class="easyui-combobox"  data-options="prompt:'进度状态'" style="font-size: 15px;color:gainsboro;width: 150px;height: 30px;"/>
        </label>

    </div>

    <div>
        <a id="TaskListSearch_btn" style="background: #99BBE8;height: 100%;width: 10%;color: black;" class="easyui-linkbutton" plain="true" onclick="taskListSearch()">搜索</a>
        <a id="TasksDelete_btn" style="background: #99BBE8;height: 100%;width: 10%;color: black;"  class="easyui-linkbutton" plain="true" >批量删除</a>
        <a id="TaskAdd_btn" onclick="taskListbtnJump('任务添加','./task/taskAdd.html')" style="background: #99BBE8;height: 100%;width: 10%;color: black;" class="easyui-linkbutton" plain="true">添加任务</a>
    </div>
</div>

<script>
    $(function(){
        $('#taskList').datagrid({
            fitColumns:true,
            nowrap: false,
            striped: true,
            border: true,
            collapsible:false,//是否可折叠的
            fit: true,//自动大小
            remoteSort:false,
            idField:'fldId',
            singleSelect:false,//是否单选
            pagination:true,//分页控件
            rownumbers:false,//行号
            onClickRow:function(rowIndex, rowData){
                //取消选择某行后高亮
                $('#taskList').datagrid('unselectRow', rowIndex);
            }
        });

        var p = $('#taskList').datagrid('getPager');
        $(p).pagination({
            pageSize: 10,
            pageList: [5,10,15],
            beforePageText: '',
            afterPageText: '',
            onSelectPage:function(pageNumber,pageSize) {
                alert(pageNumber);
            }
        });
    });


    $('#taskListSearchState_input').combobox({
        valueField:'id',
        textField:'text',
        url:'../json/task/taskState.json',
        editable:false
    });

    function cOperation(val,row){
            return '<a id="details_link" href="#" onclick="taskListbtnJump(\'' + "任务详情"+'\',\'' + "./task/taskDetails.html"+'\',\'' +row.tkNum +'\')">详情</a>'+
                '<a id="schedule_link" href="#" onclick="taskListbtnJump(\'' + "任务进度"+'\',\'' + "./task/taskSchedule.html"+'\',\'' +row.tkNum +'\')">查看进度</a>'+
                '<a id="update_link" href="#">修改</a>'+
                '<a id="delete_link" href="#" >删除</a>';
        }

    //onclick="taskListbtnJump(\'' + "任务修改"+'\',\'' + "./task/taskAdd.html"+'\',\'' +row.tkNum +'\')"修改的点击事件

    //返回
    function Back(title){
            if(!$('#tabs').tabs('exists',"任务列表管理")){
                $('#tabs').tabs('add', {
                    title:  "任务列表管理",
                    href: './task/taskListManage.html',
                    closable: true
                });
                $('#tabs').tabs('close',title);
            }
            else{
                $('#tabs').tabs('select',"任务列表管理");
            }
        }

    $.parser.onComplete = function(){
        taskListSearch();
//        var onSelectPage = $(p).pagination.onSelectPage;
//        $(p).pagination.onSelectPage = function(pageNumber, pageSize){
//            onSelectPage.call(this, pageNumber, pageSize);
//            alert(123);
//        }
    }


</script>